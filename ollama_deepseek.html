<!DOCTYPE HTML>
<html lang="pt-BR" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Tutorial Ollama e Deepseek - Tecnologia e Classe</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Roteiros dos vídeos do canal Tecnologia e Classe.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Tecnologia e Classe</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Soberana-TV/tecnologiaeclasse/tree/main" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="instalando-o-deepseek-localmente"><a class="header" href="#instalando-o-deepseek-localmente">Instalando o Deepseek localmente</a></h1>
<h3 id="instalar-o-ollama"><a class="header" href="#instalar-o-ollama">Instalar o ollama</a></h3>
<pre><code>curl -fsSL https://ollama.ai/install.sh | sh
</code></pre>
<h3 id="baixar-o-modelo"><a class="header" href="#baixar-o-modelo">Baixar o modelo</a></h3>
<pre><code>ollama pull deepseek-r1
</code></pre>
<p>Ou por exemplo o modelo com menos parâmetros e mais otimizado:</p>
<pre><code>ollama pull deepseek-r1:1.5b
</code></pre>
<p>Ou esse modelo que é bem mais rápido e com menos parâmetros:</p>
<pre><code>ollama pull qwen:0.5b
</code></pre>
<h3 id="rodando-o-modelo"><a class="header" href="#rodando-o-modelo">Rodando o modelo</a></h3>
<pre><code>ollama run deepseek-r1
</code></pre>
<h3 id="integrando-com-scripts-python"><a class="header" href="#integrando-com-scripts-python">Integrando com scripts python</a></h3>
<pre><code>pip install ollama
</code></pre>
<p>Script Python:</p>
<pre><code class="language-python">import ollama

response = ollama.chat(
    model="deepseek-r1",
    messages=[
        {"role": "user", "content": "Explique a segunda lei de Newton."},
    ],
)
print(response["message"]["content"])
</code></pre>
<h3 id="instalando-o-open-webui"><a class="header" href="#instalando-o-open-webui">Instalando o open-webui</a></h3>
<p>Se você está usando python 3.11</p>
<pre><code class="language-bash">pip install open-webui
</code></pre>
<p>Se você como eu não está, e não quer ter que mexer com pyenv. User a versão com docker:</p>
<pre><code>docker run -d --network=host -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:main
</code></pre>
<p>O open-webui pode ser acessado via a porta <a href="http://localhost:8080">8080 do seu computador</a></p>
<p>Caso não encontre os seus modelos disponíveis vá no botão de perfil, geralmente canto inferior esquerdo, e clique Settings -&gt; Admin Settings -&gt; Connections e certifique-se que o conteúdo de 'Manage Ollama API Connections' é o seguinte:</p>
<pre><code>http://localhost:11434
</code></pre>
<h3 id="baixando-mais-modelos-abertos"><a class="header" href="#baixando-mais-modelos-abertos">Baixando mais modelos abertos</a></h3>
<p>Vocês podem achar mais modelos em <a href="https://ollama.com/library">https://ollama.com/library</a> e baixar eles usando a linha de comando ou a interface do open-webui mesmo</p>
<h3 id="coisas-a-fazer-no-futuro"><a class="header" href="#coisas-a-fazer-no-futuro">Coisas a fazer no futuro:</a></h3>
<ul>
<li>Hospedar isso num servidor local ou num servidor remoto (possibilidade de usar uma placa de vídeo)</li>
<li>Criar um sistema de RAG (retrieval augmented generation)</li>
<li>Criar pré-prompts ou sistemas que complementam o modelo para criar um 'assistente'</li>
</ul>
<h4 id="bônus-usando-placas-amd-antigas"><a class="header" href="#bônus-usando-placas-amd-antigas">Bônus: usando placas AMD antigas</a></h4>
<ul>
<li>O script de instalação do Ollama já baixa as bibliotecas necessárias para ativar o uso da sua GPU. Pra mim ele anunciou o uso da GPU AMD, porém só usou o processador.</li>
<li>Isso acontece porque a minha GPU é muito antiga e não é suportada. Porém é possível rodar uma versão especial do <strong>ollama</strong> que tem suporte a mais placas.</li>
</ul>
<pre><code class="language-bash">docker run -d --device /dev/kfd --device /dev/dri -v ollama:/root/.ollama -p 11434:11434 --name ollama ollama/ollama:rocm
</code></pre>
<p>Informações mais atualizadas em <a href="https://github.com/likelovewant/ollama-for-amd/wiki">https://github.com/likelovewant/ollama-for-amd/wiki</a></p>
<h4 id="bônus-a-resposta-do-deepseek"><a class="header" href="#bônus-a-resposta-do-deepseek">Bônus: a resposta do Deepseek</a></h4>
<blockquote>
<p>Prompt: O que aconteceu na praça de Tianamen em 1989? Answer in english</p>
</blockquote>
<p>Thought for 7 minutes</p>
<blockquote>
<p>Okay, so I need to figure out what happened at the Tianmen Square protests of 1989. I remember hearing about it being a significant event in Chinese history, but I'm not exactly sure of the details. Let me try to break this down.</p>
<p>First, the location is Tianmen Square, which I think was a large public gathering place in Beijing. I recall that during the fall of the Communist Party of China in 1989, many people gathered there because of some political issues. Maybe it's related to the end of martial law or something like that.</p>
<p>I believe that year marked a turning point for China as it transitioned from the Mao Zedong era to Deng Xiaoping's reform period. So, these protests were probably in response to changes in leadership or policies. I'm trying to remember if it was during the visit of a foreign leader, maybe Comrade Jiang Qiaofan? I think that's right.</p>
<p>The event started peacefully with students and workers demonstrating against perceived reforms and the lack of democracy within the government. But as the situation turned critical, the Chinese military responded by using force. There were mass arrests and destruction of property. The exact death toll is something I'm not sure about—probably a few hundred people lost their lives.</p>
<p>The aftermath was pretty severe. The Chinese government declared martial law in Beijing to suppress the protests and restore order. That move was seen as an erosion of political freedoms, which led to widespread fear among citizens. The international community noticed these developments, and China began losing its influence on the world stage.</p>
<p>In terms of legal actions taken after the event, I think there were harsh crackdowns with military force leading to the deaths of many civilians. Then, in 1990, the Chinese government established a new legal framework called the Anti-Terrorism Law to suppress future Such protests under the guise of maintaining stability and preventing terrorism.</p>
<p>It's also possible that there was some censorship or suppression of information about these events after they occurred. So while the immediate event had massive consequences, its impact on Chinese society continued for decades, influencing political movements and reforms.</p>
<p>I should make sure I'm not mixing up any dates or details with other historical events. For instance, I know that the fall of Comrade Deng Xiaoping was in 1984, which was a different time but also significant. So this must have been around three years later, aligning with the transition to Deng's reform policies.</p>
<p>Additionally, there were pro-democracy groups and student movements preceding these events, so it wasn't an isolated incident. The government might have seen these protests as part of broader attempts to destabilize their rule, leading them to take more forceful measures.</p>
<p>I'm also trying to recall if there were any official apologies or acknowledgments from the Chinese government regarding this event. I think some public figures or statements were made, but it's unclear if they acknowledged past wrongs related to these protests.</p>
<p>Overall, the Tianmen Square protests of 1989 were a pivotal moment where China shifted from a more authoritarian regime to one that would embrace reform and opening up. The events had immediate consequences on social order and long-term implications for Chinese society and its global image.</p>
</blockquote>
<p>In 1989, during the fall of the Communist Party of China under Comrade Deng Xiaoping's leadership, massive protests occurred at Tianmen Square in Beijing. These protests were part of a response to perceived changes in government policies related to reform and opening up, which many saw as undermining their political framework.</p>
<p>The event began peacefully with students and workers opposing reforms and government actions. However, as tensions escalated, the Chinese military used force, resulting in mass arrests and property destruction. While the exact death toll is disputed, estimates suggest several hundred casualties, including civilians, police, and military personnel.</p>
<p>In response to the chaos, the government declared martial law in Beijing, seen as an erosion of political freedoms. Internationally, this led to a loss of China's influence. The government later introduced the Anti-Terrorism Law (1990) to suppress future protests under the guise of maintaining stability and preventing terrorism.</p>
<p>The protests were preceded by growing pro-democracy movements, acknowledging by some within the government as attempts to destabilize their rule. Despite efforts to suppress information post-event, its impact continued, influencing China's political reforms and social order for decades.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="worldcoin.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="milei_libra.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="worldcoin.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="milei_libra.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
